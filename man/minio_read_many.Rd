% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/minio_read_many.R
\name{minio_read_many}
\alias{minio_read_many}
\title{Read and Concatenate Many Parquet Objects from MinIO}
\usage{
minio_read_many(
  bucket,
  objects = NULL,
  prefix = NULL,
  pattern = NULL,
  date_from = NULL,
  date_to = NULL,
  warn_bytes = 1e+09,
  out_dir = NULL,
  verbose = TRUE,
  use_https = TRUE,
  region = ""
)
}
\arguments{
\item{bucket}{Character. Name of the MinIO bucket.}

\item{objects}{Character vector or \code{NULL}. Explicit object keys to read.}

\item{prefix}{Character or \code{NULL}. Prefix for listing objects when \code{objects} is \code{NULL}.}

\item{pattern}{Character or \code{NULL}. Regex pattern to filter keys when using \code{prefix}.}

\item{date_from, date_to}{Character/numeric or \code{NULL}. Inclusive range filter based on suffix.
If 4 digits -> year, 6 digits -> yearmonth, 8 digits -> yearmonthday.
Example: \code{date_from = 2020, date_to = 2024} filters \code{_YYYY}.}

\item{warn_bytes}{Numeric. If total remote size exceeds this threshold, a warning is emitted.
Defaults to 1e9 (â‰ˆ 1 GB).}

\item{out_dir}{Character or \code{NULL}. If provided, results are streamed to this local directory
as a Parquet dataset (one file per input object) and the function returns the directory path.}

\item{verbose}{Logical. Whether to print progress messages. Defaults to \code{TRUE}.}

\item{use_https}{Logical. Whether to use HTTPS when connecting to MinIO.}

\item{region}{Character. Region string required by \code{aws.s3}.}
}
\value{
If \code{out_dir} is \code{NULL}, returns a \code{data.frame} (union schema).
  If \code{out_dir} is provided, returns \code{out_dir} (invisibly) after writing the dataset.
}
\description{
Reads multiple Parquet objects from MinIO and concatenates them. Objects can be
provided explicitly via \code{objects} or discovered via \code{prefix} and
optional regex \code{pattern}. Optionally filters objects by a date-like suffix
in the key: \code{_YYYY}, \code{_YYYYMM}, or \code{_YYYYMMDD} (inclusive range).
}
\details{
The function computes total remote bytes using \code{\link{minio_get_metadata}}
and warns if the estimated size exceeds \code{warn_bytes}. For large reads, you
can stream results to a local Parquet dataset directory via \code{out_dir}.

Concatenation is schema-union: the output includes all columns across all files.
Missing columns in individual files are filled with \code{NA}.
}
\examples{
\dontrun{
# Explicit keys
df <- minio_read_many(
  bucket = "assets",
  objects = c("raw/x_202301.parquet", "raw/x_202302.parquet")
)

# Prefix + pattern + date range by year
df <- minio_read_many(
  bucket = "assets",
  prefix = "raw/x/",
  pattern = "\\\\\\\\.parquet$",
  date_from = 2020,
  date_to = 2024
)

# Stream to local dataset (recommended for large volumes)
out <- minio_read_many(
  bucket = "assets",
  prefix = "raw/x/",
  pattern = "\\\\\\\\.parquet$",
  date_from = 202301,
  date_to = 202312,
  out_dir = "output/many_parquet_dataset"
)
}

}
